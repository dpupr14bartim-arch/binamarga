<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Web GIS Jembatan Barito Timur</title>

<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css">
<style>
body{margin:0;font-family:Segoe UI;background:#071427;color:#e0f7ff}
#map{height:100vh}
#info{
  position:absolute;top:20px;right:20px;width:320px;
  background:#071a33;padding:12px;border-radius:12px;
  box-shadow:0 0 20px #00eaff66;display:none;z-index:999
}
#info img{width:100%;border-radius:8px;margin-bottom:8px}
</style>
</head>
<body>

<div id="map"></div>

<div id="info">
  <img id="foto">
  <b id="nama"></b><br>
  No: <span id="no"></span><br>
  Kecamatan: <span id="kec"></span><br>
  Desa: <span id="desa"></span><br>
  Ruas: <span id="ruas"></span><br>
  Kondisi: <span id="kondisi"></span><br>
  Koordinat: <span id="koord"></span>
</div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
const API_URL = "PASTE_URL_GAS_BARU_DI_SINI";

const map = L.map("map").setView([-2.1,115.2],9);
L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(map);

const icon = L.icon({
  iconUrl:"pupr.png",
  iconSize:[36,36],
  iconAnchor:[18,36]
});

const info = document.getElementById("info");
const foto = document.getElementById("foto");
const nama = document.getElementById("nama");
const no = document.getElementById("no");
const kec = document.getElementById("kec");
const desa = document.getElementById("desa");
const ruas = document.getElementById("ruas");
const kondisi = document.getElementById("kondisi");
const koord = document.getElementById("koord");

fetch(API_URL)
.then(r=>r.json())
.then(j=>{
  if(j.status!=="success") throw j.message;

  j.data.forEach(d=>{
    const lat = Number(String(d.lat).replace(",","."));
    const lng = Number(String(d.long).replace(",","."));
    if(isNaN(lat)||isNaN(lng)) return;

    const m = L.marker([lat,lng],{icon}).addTo(map);
    m.on("click",()=>{
      foto.src = d.foto || "https://via.placeholder.com/300x180";
      nama.innerText = d.nama_jembatan;
      no.innerText = d.no_jembatan;
      kec.innerText = d.kecamatan;
      desa.innerText = d.desa_kelurahan;
      ruas.innerText = d.ruas_jalan;
      kondisi.innerText = d.kondisi;
      koord.innerText = lat.toFixed(6)+", "+lng.toFixed(6);
      info.style.display="block";
    });
  });
})
.catch(e=>alert("Gagal load data: "+e));
</script>

</body>
</html>
